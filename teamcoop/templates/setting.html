{% extends "base.html" %}
<!-- highlight issue tag -->
{% block setting_class %}active{% endblock %} 
{% block main %}
<h4 class="setting_select"> 
<div class="btn-group btn-group-justified" role="group">
    <div class="btn-group" role="group">
        <button type="button" class="btn btn-default" data-target="personal-setting">个人设置</button>
    </div>
    {% if data.user_level == 1 %}
    <div class="btn-group" role="group">
        <button type="button" class="btn btn-default" data-target="member-setting">成员设置</button>
    </div>
    {% endif %}
</div>
</h4>
<div class="row">
    <form role="form" class="col-md-6 col-md-push-3 personal-setting">
        <div class="form-group">
            <label class="control-label" for="username">Username</label>
            <input type="text" class="form-control" id="username" placeholder="Enter Username">
        </div>
        <div class="form-group">
            <label class="control-label" for="name">Name</label>
            <input type="text" class="form-control" id="name" placeholder="Enter name">
        </div>
        <div class="form-group">
            <label class="control-label" for="password">Password</label>
            <input type="password" class="form-control" id="password" placeholder="Password">
        </div>
        <div class="form-group">
            <label class="control-label" for="confirm_passwd">Confirm_password</label>
            <input type="password" class="form-control" id="confirm_passwd" placeholder="Password">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
    </form>
    {% if data.user_level == 1 %}
    <div class="member-setting col-md-12" style="display:none;">
        <ol class="breadcrumb">
            <li><a href="#">Setting</a>
            </li>
            <li><a href="#">MemberSetting</a>
            </li>
            <li class="active">Department</li>
        </ol>
        <section>
            <!-- Button trigger modal -->
            <button class="btn btn-primary" data-toggle="modal" data-target="#createPartment">创建部门</button>
            <!-- create partment Modal -->
            {% include "partial/createPartmentModal.html" %}
            <!-- partment detail Modal -->
            {% include "partial/partmentDetailModal.html" %}
            <table class="table table-striped">
                <thead>
                    <th>部门名</th>
                    <th>人数</th>
                    <th>操作</th>
                </thead>
                <tbody>
                    <tr>
                        <td><a href="">design</a>
                        </td>
                        <td>2</td>
                        <td>
                            <button class="btn btn-xs btn-danger">delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td><a href="">frontend</a>
                        </td>
                        <td>2</td>
                        <td>
                            <button class="btn btn-xs btn-danger">delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td><a href="">backend</a>
                        </td>
                        <td>2</td>
                        <td>
                            <button class="btn btn-xs btn-danger">delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

    </div>
    {% endif %}
</div>

{% endblock%}

{% block footerscript%}
<script>
    // add_project
    function addproject() {
        $('#add_project').on('focus', 'input', function(event) {
            var eventObj = $(event.target);
            if (eventObj.parentsUntil('form', '.form-group').index() == ($('#add_project .form-group').size() - 1)) {
                $('#add_project').append($('.form-group').last().find('button').show().end().clone());
            }
            $('#add_project button').last().hide();
        });
        $('#add_project').on('click', 'button', function(event) {
            var eventObj = $(event.target);
            eventObj.parentsUntil('form', '.form-group').remove();
            $('#add_project button').last().hide();
        });
        $('#add_project button').last().hide();
    }
    // toggle selection
    function toggle() {
        $('.setting_select button').on('click', function(event) {
            var name = $(event.target).attr('data-target');
            $('.member-setting,.personal-setting').hide();
            $('.'+name).show();
        });
    }
    $(function(){
        addproject();
        toggle();
    })
</script>
{% endblock%}
